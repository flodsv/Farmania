<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
    <title>Farmania</title>
    <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(1366, 768, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update});

function preload() {

    game.load.spritesheet('buttong', 'assets/boutongarcon1.png', 193, 71);
	game.load.spritesheet('buttonf', 'assets/boutonfille1.png', 193, 71);
    game.load.image('background','assets/background1.png');
	game.load.image('farmerfront', 'assets/farmerfront.png');
	game.load.image('girlfarmerfront', 'assets/girlfarmerfront.png');
	game.load.image('zone_text', 'assets/zone_text2.png', 480,100);
	game.load.audio('un', ['assets/audio/instrumenu.mp3']);
}

var buttong;
var buttonf;
var background;
var counter = 0;
var text = 0;
var click=0;
var compteur=0;
var text=[];
text[0]="Bienvenue dans la ferme du futur ";
text[1]="Tu te demandes ce que tu fais ici ?";
text[2]="Moi aussi ! x')";
text[3]="J'te présente ma ferme => *wouaaah*";
text[4]="(ça fait pas forcément rêver mais c'est déjà une base !)";
text[5]="Bon alors on va reprendre les bases:";
text[6]="Simple... Basique... :";
text[7]="Ma ferme est maintenant a toi !";
text[8]="La banque a acceptée ton prêt de 500 Bitcoins";
text[9]="T'as 1 an et t'es seul(e) , fais de cette ferme :";
text[10]="Une ferme autonome!";
text[11]="Aussi bien pour les récoltes que pour l'énergie";
text[11]="Simple... Basique...";
text[12]="Acheter des vaches tu devras";
text[13]="Elle se feront traîre toute seule , Génial non ?";
text[14]="Du champ tu t'occuperas";
text[15]="Dans le shop, ton bonheur tu trouveras ";
text[16]="Simple ? Basique ? Tu as envie de me dire ?";
text[17]="Alors fait de ma ferme une ferme autonome :";
text[18]="Et je te couvrirai d'or !";
text[19]="Mais avant de commencer une petite question: ";
text[20]="Est-tu une fille ou un garçon?";
var texte=1;
var zone_text;
var sexe;
function create() {
	game.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL;
  	game.scale.startFullScreen();
	game.input.onDown.add(gofull, this);
    game.stage.backgroundColor = '#182d3b';
    background = game.add.tileSprite(0, 0, 1366, 768, 'background');	
}
function update() {
	if (click==0 && texte==1){
			texte=2;
			tuto();
		}
}
function tuto(){     // gestion du tutoriel
		zone_text = game.add.button(675,700, 'zone_text', actionOnClickTuto );
		zone_text.anchor.setTo(0.5, 0.5);
		texte = game.add.text(640,700, ">> clique ici << ", { font: "24px Arial", fill: "#000000", align: "center" });
		texte.anchor.setTo(0.5, 0.5);
		game.world.bringToTop(texte);
}
function actionOnClickTuto(){
	texte.destroy();
	texte = game.add.text(675,700, text[click], { font: "24px Arial", fill: "#000000", align: "center" });
	texte.anchor.setTo(0.5, 0.5);
	game.world.bringToTop(texte);
	click+=1;
	if (click==21){
	spriteboy = game.add.sprite(50, 60, 'farmerfront');
	spritegirl = game.add.sprite(730, 60, 'girlfarmerfront');
	spriteboy.scale.setTo(0.75, 0.75);
	spritegirl.scale.setTo(0.75, 0.75);
    buttong = game.add.button(game.world.centerX - 450, 550, 'buttong', boy, this, 2, 1, 0);
	buttonf = game.add.button(game.world.centerX + 250, 550, 'buttonf', girl, this, 2, 1, 0);
	}
	if (click==22){
		counter=0;
		texte.destroy();
		zone_text.destroy();
		redirection();
	}
}
function gofull() { //desactiv temporaire
    game.scale.startFullScreen();
	//music1 = game.add.audio('un');
	//music1.play();
}
function boy(buttong, pointer, isOver) {
    if (isOver)
    {
		buttonf.destroy(true, true);
		spritegirl.destroy(true, true);
		redirectiong();
    }
}
function girl(buttonf, pointer, isOver) {
    if (isOver)
    {
		buttong.destroy(true, true);
		spriteboy.destroy(true, true);
		redirectionf();
    }
}
function redirectionf() {
	document.location.href="fermiere.html";
}
function redirectiong() {
	document.location.href="fermier.html";
}
</script>

</body>
</html>
